<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ğŸ“å‹å·¥åå¡å»ºæª”è¡¨</title>

  <style>
  :root {
    /* --------ç³»çµ±å…±ç”¨å¸¸æ•¸ï¼ˆå¯å…¨ç«™èª¿æ•´ï¼‰-------- */
    --card-w: 980px;            /* è¡¨å–®é¢æ¿æœ€å¤§å¯¬åº¦ï¼ˆå¯èª¿ï¼‰ */
    --radius: 16px;             /* é¢æ¿åœ“è§’ï¼ˆå¯èª¿ï¼‰ */
    --border: #2a2a2a;          /* é‚Šæ¡†è‰²ï¼ˆå¯èª¿ï¼‰ */
    --ink: #eaeaea;             /* ä¸»è¦æ–‡å­—è‰²ï¼ˆå¯èª¿ï¼‰ */
    --muted: #a8a8a8;           /* æ¬¡è¦æ–‡å­—è‰²ï¼ˆå¯èª¿ï¼‰ */
    --danger: #facc15;          /* éŒ¯èª¤è‰²ï¼ˆå¯èª¿ï¼›æ·¡é»ƒè‰²ï¼›æ–°å¢ï¼‰ */
    --ok: #22c55e;              /* æˆåŠŸ/é€šéè‰²ï¼ˆå¯èª¿ï¼‰ */
    --accent: #60a5fa;          /* é‡é»è‰²/èšç„¦é‚Šæ¡†ï¼ˆå¯èª¿ï¼‰ */
    --btn-bg: #bc2d2d;          /* æŒ‰éˆ•åº•è‰²ï¼ˆå¯èª¿ï¼‰ */
    --btn-border: #2a2a2a;      /* æŒ‰éˆ•é‚Šæ¡†ï¼ˆå¯èª¿ï¼‰ */

    --title-size: 20px;         /* é é¢æ¨™é¡Œå­—ç´šï¼ˆå¯èª¿ï¼›æ¯é å¯è¦†è“‹ï¼‰ */
    --content-size: 12px;       /* å…§æ–‡/è¡¨å–®åŸºæº–å­—ç´šï¼ˆå¯èª¿ï¼›æ¯é å¯è¦†è“‹ï¼‰ */
    --footer-size: 11px;        /* é å°¾å­—ç´šï¼ˆå¯èª¿ï¼‰ */

    /*//* --------å…¨åŸŸå­—ç´šæ§åˆ¶è®Šæ•¸ï¼ˆå¯è‡ªè¡Œèª¿æ•´ï¼›æ–°å¢ï¼‰--------*/*/
    --label-size: 13px;         /* æ¬„ä½æ¨™é¡Œå­—ç´šï¼ˆä¾‹å¦‚ï¼šå…¬å¸åç¨±ï¼›å¯èª¿ï¼‰ */
    --hint-size: 12px;          /* å°å­—æç¤ºï¼ˆlabel smallï¼›å¯èª¿ï¼‰ */
    --input-size: 12px;         /* è¼¸å…¥æ¡†/é¸å–®å…§æ–‡å­—å­—ç´šï¼ˆå¯èª¿ï¼‰ */
    --placeholder-size: 12px;   /* placeholder å­—ç´šï¼ˆå¯èª¿ï¼‰ */
    --error-size: 12px;         /* éŒ¯èª¤è¨Šæ¯å­—ç´šï¼ˆå¯èª¿ï¼‰ */

    --section-gap: 16px;        /* å€å¡Šèˆ‡æ®µè½é–“è·ï¼ˆå¯èª¿ï¼‰ */
    --control-pad: 10px 12px;   /* æ§åˆ¶é …å…§è·ï¼ˆå¯èª¿ï¼‰ */
    --control-radius: 12px;     /* æ§åˆ¶é …åœ“è§’ï¼ˆå¯èª¿ï¼‰ */
    --control-bg: #0f0f0f;      /* æ§åˆ¶é …èƒŒæ™¯ï¼ˆå¯èª¿ï¼‰ */
    --control-border: #262626;  /* æ§åˆ¶é …é‚Šæ¡†ï¼ˆå¯èª¿ï¼‰ */
    --control-focus: #60a5fa;   /* æ§åˆ¶é …èšç„¦å¤–æ¡†è‰²ï¼ˆå¯èª¿ï¼‰ */

    --input-height: 38px;       /* æ§åˆ¶é …é«˜åº¦ï¼ˆè®“æ¡†æ¡†åŒé«˜ï¼›å¯èª¿ï¼‰ */

    --actionbar-h: 64px;        /* åº•éƒ¨å›ºå®šæ“ä½œåˆ—é«˜åº¦ï¼ˆå¯èª¿ï¼›JS è¦†è“‹å¯¦éš›é«˜åº¦ï¼‰ */
    --footer-h: 44px;           /* é å°¾é«˜åº¦ï¼ˆå¯èª¿ï¼‰ */
    --kv-offset: 0px;           /* éµç›¤å½ˆå‡ºæ™‚å‘ä¸Šä½ç§»é‡ï¼ˆJS å¯«å…¥ï¼‰ */

    /* æ–°å¢ï¼šä¸Šä¸€é /ä¸‹ä¸€é ç¸®å°ç”¨ï¼ˆå¯èª¿ï¼‰ */
    --nav-btn-min-h: 32px;      /* åªå½±éŸ¿ã€Œä¸Šä¸€é  / ä¸‹ä¸€é ã€å…©é¡†æŒ‰éˆ•çš„æœ€å°é«˜åº¦ï¼ˆå¯èª¿ï¼‰ */
    --nav-btn-pad: 4px 10px;    /* åªå½±éŸ¿ã€Œä¸Šä¸€é  / ä¸‹ä¸€é ã€å…©é¡†æŒ‰éˆ•çš„å…§è·ï¼ˆå¯èª¿ï¼‰ */

    /* æ–°å¢ï¼šæ“ä½œåˆ—å…§è·ï¼ˆå¯èª¿ï¼Œç¸®å°æ•´åˆ—é«˜åº¦ï¼‰ */
    --actionbar-pad-y: 6px;     /* æ“ä½œåˆ—ä¸Šä¸‹å…§è·ï¼ˆå¯èª¿ï¼‰ */
    --actionbar-pad-x: 12px;    /* æ“ä½œåˆ—å·¦å³å…§è·ï¼ˆå¯èª¿ï¼‰ */

    /* æ–°å¢ï¼šé¢æ¿èƒŒæ™¯è®Šæ•¸ï¼ˆç”± data-group æ§åˆ¶ï¼‰ */
    --panel-bg: linear-gradient(0deg,rgba(64,55,55,1) 0%, rgba(43,37,37,1) 37%, rgba(0,0,0,1) 100%); /* é è¨­ç°é»‘ */

    /*//* --------ç¬¬10é ï¼šç¯„ä¾‹åœ–ç‰‡å°ºå¯¸/å¤–è§€ï¼ˆå¯è‡ªè¡Œèª¿æ•´ï¼›æ–°å¢ï¼‰--------*/*/
    --sample-gap: 10px;         /* å·¦å³å…©å¼µåœ–ç‰‡ä¹‹é–“çš„é–“è·ï¼ˆå¯èª¿ï¼‰ */
    --sample-max-h: 180px;      /* åœ–ç‰‡æœ€å¤§é«˜åº¦ï¼ˆå¯èª¿ï¼šæ”¾ä¸ä¸‹è‡ªå‹•ç¸®å°ï¼‰ */
    --sample-pad: 8px;          /* æ¯å¼µåœ–å¤–æ¡†å…§è·ï¼ˆå¯èª¿ï¼‰ */
    --sample-bg: rgba(255,255,255,0.04); /* åœ–ç‰‡å¤–æ¡†åº•è‰²ï¼ˆå¯èª¿ï¼‰ */
    --sample-radius: 12px;      /* åœ–ç‰‡å¤–æ¡†åœ“è§’ï¼ˆå¯èª¿ï¼‰ */

    /* æ–°å¢ï¼šæ¬„ä½å¯¦éš›å­—è‰²ï¼ˆé¿å…è£ç½®ä¸Šå‡ºç¾é»‘å­—çœ‹ä¸åˆ°ï¼‰ */
    --field-ink: var(--muted);  /* æ–°å¢èª¿æ•´ï¼šè¼¸å…¥æ¡†èˆ‡ä¸‹æ‹‰é¸å–®çš„æ–‡å­—é¡è‰²æ”¹æˆèˆ‡ â æç¤ºåŒè‰² */
  }

  /* å¯é¸ï¼šå¦‚éœ€è‡ªå¸¶å­—å‹ï¼Œå°‡ woff2 æª”æ”¾å…¥ /fonts ä¸¦å–æ¶ˆä¸‹åˆ—è¨»è§£ï¼ˆæ–°å¢ï¼‰
  @font-face{
    font-family: "GenSenRounded"; /* æºæ³‰åœ“é«”ï¼ˆç¤ºæ„ï¼‰ */
    src: url("fonts/GenSenRounded-Normal.woff2") format("woff2");
    font-weight: 400; font-style: normal; font-display: swap;
  }
  */

  /* ===== å…¨ç«™èƒŒæ™¯åº•è‰² ===== */
  html, body { height: 100%; margin: 0; overflow-x: hidden; }
  body {
    /*//* --------å…¨åŸŸå­—é«”å †ç–Šï¼ˆä»¥æºæ³‰åœ“é«”ç‚ºä¸»ï¼‰--------*/*/
    font-family:
      "GenSenRounded",
      "Yuanti TC",
      "Hiragino Maru Gothic ProN",
      "M PLUS Rounded 1c",
      "PingFang TC",
      "Noto Sans TC",
      "Microsoft JhengHei",
      "Segoe UI",
      Arial,
      sans-serif;

    color: var(--ink);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    touch-action: pan-y;              /* å‚ç›´æ»‘å‹• */
    overscroll-behavior-y: contain;   /* æŠ‘åˆ¶å½ˆæ€§å›å½ˆå¹²æ“¾ */
    background: #000;                 /* èƒŒæ™¯åº•è‰²ï¼ˆé¢æ¿æ¼¸å±¤æœƒè¦†è“‹ï¼‰ */
  }

  /* é¢æ¿ï¼ˆä¸Šä¸‹è²¼é½Šã€å…§å®¹å…§æ²ã€å›ºå®šåº•éƒ¨æ“ä½œåˆ— + é å°¾ï¼‰ */
  .container {
    width: min(var(--card-w), 100vw);
    height: 100svh; /* ä½¿ç”¨ svhï¼Œå—è¦–å£å¯è¦–é«˜åº¦å½±éŸ¿ï¼Œéµç›¤å½ˆå‡ºæ›´ç©©å®š */
    margin: 0 auto;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: 0 12px 28px rgba(0,0,0,0.35);
    display: grid;
    grid-template-rows: auto 1fr auto auto; /* header / content / actionbar / footer */
    overflow: hidden;
    background: linear-gradient(0deg,rgba(64,55,55,1) 0%, rgba(43,37,37,1) 37%, rgba(0,0,0,1) 100%);
  }
  /* é¢æ¿èƒŒæ™¯åˆ†çµ„ï¼ˆä¾é ç¢¼åˆ‡æ›ï¼‰ */
  .container[data-group="g1"]{
    /*//* --------é…è‰²ï¼ˆç¬¬1~6é ï¼šç°é»‘ï¼›å¯è‡ªè¡Œèª¿æ•´ï¼‰--------*/*/
    background: linear-gradient(0deg,rgba(64,55,55,1) 0%, rgba(43,37,37,1) 43%, rgba(0,0,0,1) 100%);
  }
  .container[data-group="g2"]{
    /*//* --------é…è‰²ï¼ˆç¬¬7~9é ï¼šç´…ç³»ï¼›å¥—ç”¨æ–°æŒ‡å®šï¼‰--------*/*/
    background: linear-gradient(0deg,rgba(87, 8, 8, 1) 0%, rgba(98, 13, 13, 1) 60%, rgba(61, 4, 4, 1) 100%);
  }
  .container[data-group="g3"]{
    /*//* --------é…è‰²ï¼ˆç¬¬10~13é ï¼šç´«ç³»ï¼›å·²æ“´è‡³ç¬¬13é ï¼‰--------*/*/
    background: linear-gradient(0deg,rgba(105,30,61,1) 0%, rgba(75,14,61,1) 83%, rgba(56,4,61,1) 100%);
  }

  /* ===== ä»¥ CSS è®Šæ•¸å¼·åˆ¶ä¾ data-group å¥—è‰²ï¼ˆç¢ºä¿è¦†è“‹ï¼‰ ===== */
  .container { background: var(--panel-bg) !important; } /* æœ€çµ‚èƒŒæ™¯ */
  .container[data-group="g1"]{ --panel-bg: linear-gradient(0deg,rgba(64,55,55,1) 0%, rgba(43,37,37,1) 43%, rgba(0,0,0,1) 100%); }
  .container[data-group="g2"]{ --panel-bg: linear-gradient(0deg,rgba(87, 8, 8, 1) 0%, rgba(98, 13, 13, 1) 60%, rgba(61, 4, 4, 1) 100%); } /* æ–°ç´…è‰²ç³» */
  .container[data-group="g3"]{ --panel-bg: linear-gradient(0deg,rgba(105,30,61,1) 0%, rgba(75,14,61,1) 83%, rgba(56,4,61,1) 100%); }

  /* é é¦–ï¼ˆä¸­é–“ç½®ä¸­æ¨™é¡Œï¼›å³ä¸Šè§’é¡¯ç¤ºæ­¥é©Ÿï¼‰ */
  .header {
    position: relative;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
    backdrop-filter: blur(2px);
  }
  .header-title {
    font-weight: 800;
    font-size: var(--title-size);
    text-align: center;
    letter-spacing: 0.5px;
    /* æ–°å¢ï¼šå‹å·¥åå¡å»ºæª”è¡¨æ¨™é¡Œç²—é«”+é™°å½±æ•ˆæœï¼ˆå¯èª¿æ•´æˆ–åˆªé™¤ï¼‰ */
    text-shadow: 0 0 6px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.6);
  }
  .header-step {
    position: absolute;
    right: 12px; top: 12px;
    color: var(--muted);
    font-size: var(--content-size);
    font-weight: 700;
  }

  /* å…§å®¹ï¼šåªåœ¨æ­¤å€æ»¾å‹•ï¼›åº•éƒ¨é ç•™æ“ä½œåˆ—èˆ‡é å°¾é«˜åº¦ */
  .content {
    padding: 16px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: calc(var(--actionbar-h) + var(--footer-h) + 16px);
  }

  /* æ­¥é©Ÿé  */
  .step { display: none; font-size: var(--content-size); }
  .step.active { display: block; }
  .step h2 {
    margin: 0 0 10px 0;
    font-size: var(--title-size);
    text-align: center;
    font-weight: 800;
  }

  .note-list {
    margin: 8px 0 16px 1.2em;
    color: var(--muted);
    line-height: 1.7;
  }

  .fieldset {
    border: 1px dashed var(--border);
    border-radius: var(--control-radius);
    padding: 14px;
    margin-top: var(--section-gap);
  }

  /* ç¬¬1é ç‰¹åˆ¥ï¼šæ•´çµ„ç½®ä¸­ + é¸é …ç½®ä¸­ */
  .center-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 12px;
  }
  .radio-row {
    display: flex;
    justify-content: center;
    gap: 18px;
    flex-wrap: wrap;
  }
  .exit {
    background: rgba(250, 204, 21, .10);   /* æ·¡é»ƒåº• */
    border: 1px solid rgba(250, 204, 21, .45);
    color: #fde68a;
    padding: 12px;
    border-radius: 12px;
    margin-top: 8px;
    display: none;
  }
  .exit.show { display: block; }

  /* è¡¨å–®æ§åˆ¶é …ï¼ˆçµ±ä¸€å¯¬é«˜ï¼‰ */
  label { 
    font-weight: 700; 
    display: block; 
    margin-bottom: 6px;
    font-size: var(--label-size, var(--content-size));
  }
  label small { 
    color: var(--muted); 
    font-weight: 600; 
    margin-left: 4px;
    font-size: var(--hint-size, var(--content-size)); 
  }
  .row { margin-bottom: var(--section-gap); }

  input[type="text"],
  input[type="email"],
  select {
    width: 100%;
    padding: var(--control-pad);
    background: var(--control-bg);
    border: 1px solid var(--control-border);
    border-radius: var(--control-radius);
    outline: none;

    /* é‡è¦ï¼šè¼¸å…¥æ¡†/é¸å–®å…§æ–‡å­—æ”¹ç‚ºä½ æŒ‡å®šçš„é¡è‰²ï¼ˆèˆ‡ â æç¤ºä¸€è‡´ï¼‰ */
    color: var(--field-ink);
    font-size: var(--input-size);

    height: var(--input-height);
    box-sizing: border-box;
  }

  /* ä¸‹æ‹‰é¸å–®çš„é¸é …æ–‡å­—ä¹Ÿå¼·åˆ¶ç‚º var(--field-ink)ï¼ˆé¿å…è£ç½®é è¨­é»‘å­—ï¼‰ */
  select, select option { 
    color: var(--field-ink) !important; 
    background: var(--control-bg);
  }

  /* placeholder ä¹Ÿä¸€ä½µæ”¹æˆ var(--field-ink)ï¼Œé¿å…çœ‹ä¸åˆ° */
  input::placeholder { 
    font-size: var(--placeholder-size);
    color: var(--field-ink);
  }

  input:focus, select:focus {
    border-color: var(--control-focus);
    box-shadow: 0 0 0 3px rgba(96,165,250,.25);
  }

  /* å…¨åŸŸï¼šéŒ¯èª¤è¨Šæ¯å­—ç´šèˆ‡é¡è‰²ï¼ˆæ·¡é»ƒï¼‰ */
  .error { color: var(--danger); margin-top: 6px; font-size: var(--error-size); display:none; }

  /* è®“ã€Œåªæœ‰æ˜¯/å¦ã€çš„é é¢ç¶­æŒèˆ‡å…§å®¹ç›¸åŒå¤§å°ï¼ˆä¸å— label 13px å½±éŸ¿ï¼‰ */
  .radio-row label { font-size: var(--content-size); font-weight: 700; }

  /* iOS Safari è‡ªå‹•æ”¾å¤§é˜²å‘†ï¼ˆåƒ…ä½œç”¨åœ¨ç™»å…¥é®ç½©çš„å¯†ç¢¼æ¬„ï¼›é¿å…ä¸€é–‹å§‹æ•´é æ”¾å¤§ï¼‰
     ï¼‹ æ–°å¢ï¼šä¸€èˆ¬è¼¸å…¥æ¡†èˆ‡ä¸‹æ‹‰é¸å–®å­—ç´šè¨­ç‚º 16px ä»¥é¿å…é»æ“Šæ™‚è‡ªå‹•æ”¾å¤§ç•«é¢ï¼ˆå¯èª¿æ•´ â‰¥16ï¼‰ */
  @supports (-webkit-touch-callout: none) {
    .gate #gatePwd { font-size: 16px; }
    /* æ–°å¢ï¼šé¿å… iOS é»æ–‡å­—è¼¸å…¥æ¡†/é¸å–®æ™‚è‡ªå‹•æ”¾å¤§ç•«é¢ */
    input[type="text"],
    input[type="email"],
    select {
      font-size: 16px; /* è‹¥è¦ºå¾—å¤ªå¤§ï¼Œå¯æ”¹æˆ 15~17 æ¸¬è©¦ï¼Œéœ€ â‰¥16 æ‰èƒ½é˜»æ­¢æ”¾å¤§ */
    }
  }

  /* å¼·åˆ¶ select ä»ç”¨ 12px èˆ‡ â åŒè‰²ï¼ˆè¦†è“‹å¯èƒ½çš„ç’°å¢ƒå·®ç•°ï¼›ä¿ç•™è¨»è§£ï¼‰ */
  select { font-size: var(--input-size) !important; }

  /* æª”æ¡ˆä¸Šå‚³ï¼ˆåŒé«˜ï¼‰ */
  .file-row {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 10px;
    align-items: center;
    margin-bottom: var(--section-gap);
  }
  .file-name {
    color: var(--muted);
    font-size: var(--content-size);
    min-height: var(--input-height);
    display: flex; align-items: center;
    padding: 0 6px;
    border: 1px dashed var(--control-border);
    border-radius: var(--control-radius);
    background: rgba(255,255,255,0.02);
    box-sizing: border-box;
  }
  .file-input { position: relative; overflow: hidden; display: inline-block; }
  .file-input input[type="file"] { position: absolute; inset: 0; opacity: 0; cursor: pointer; }
  .file-btn {
    appearance: none;
    border: 1px solid var(--btn-border);
    background: var(--btn-bg);
    color: var(--ink);
    padding: 10px 14px;
    border-radius: 12px;
    font-weight: 800;
    cursor: pointer;
    font-size: var(--content-size);
    min-height: var(--input-height);
    display: inline-flex; align-items: center;
  }

  /* æ–°å¢ï¼šæª”æ¡ˆä¸Šå‚³å‰çš„å°ç¸®åœ–é è¦½å€å¡Šï¼ˆå¯èª¿æ•´å¤§å°æˆ–åˆªé™¤ï¼‰ */
  .file-preview {
    margin-top: 4px;
    min-height: 40px;         /* æ²’æœ‰åœ–æ™‚ä½”ä¸€é»é«˜åº¦ï¼Œç‰ˆé¢ä¸è·³å‹•ï¼ˆå¯èª¿æ•´æˆ–ç§»é™¤ï¼‰ */
  }
  .file-preview .file-thumb {
    max-width: 120px;         /* å°ç¸®åœ–æœ€å¤§å¯¬åº¦ï¼ˆå¯èª¿æ•´ï¼‰ */
    max-height: 80px;         /* å°ç¸®åœ–æœ€å¤§é«˜åº¦ï¼ˆå¯èª¿æ•´ï¼‰ */
    border-radius: 8px;
    border: 1px solid var(--control-border);
    display: block;
  }
  .file-preview .file-note {
    font-size: 11px;
    color: var(--muted);
    margin-top: 2px;
  }

  /* åªç¸®å°ã€Œä¸Šä¸€é  / ä¸‹ä¸€é ã€å…©é¡†æŒ‰éˆ•ï¼Œä¹Ÿå¥—ç”¨åˆ°å®Œæˆéµ */
  .btn--nav {
    min-height: var(--nav-btn-min-h);
    padding: var(--nav-btn-pad);
  }
  /* æ–°å¢ï¼šä¸Šä¸€é  / ä¸‹ä¸€é  / å®Œæˆ ä¸‰é¡†æŒ‰éˆ•å¯¬åº¦çµ±ä¸€ï¼ˆå¯èª¿æ•´æ•¸å€¼ï¼‰ */
  #btnPrev,
  #btnNext,
  #btnFinish {
    min-width: 80px; /* è‹¥æƒ³ä¸‰é¡†æ›´å¯¬ï¼Œå¯æ”¹æˆ 100 æˆ– 120 */
  }

  /* åº•éƒ¨å›ºå®šæ“ä½œåˆ—ï¼ˆå…¨é å…±ç”¨ï¼‰ */
  .actionbar {
    position: relative;
    display: flex;
    gap: 10px;
    justify-content: space-between;
    align-items: center;
    padding: var(--actionbar-pad-y) var(--actionbar-pad-x) calc(var(--actionbar-pad-y) + env(safe-area-inset-bottom));
    border-top: 1px solid var(--border);
    background: rgba(0,0,0,0.35);
    backdrop-filter: blur(4px);
    height: auto; /* è‡ªé©æ‡‰é«˜åº¦ï¼ŒJS æœƒåŒæ­¥ padding-bottom */
    transform: translateY(calc(-1 * var(--kv-offset))); /* éµç›¤æŠ¬å‡ä½ç§» */
  }
  .btn {
    appearance: none;
    border: 1px solid var(--btn-border);
    background: var(--btn-bg);
    color: var(--ink);
    padding: 10px 14px;
    border-radius: 12px;
    font-weight: 800;
    cursor: pointer;
    font-size: var(--content-size);
    min-height: var(--input-height);
  }
  .btn:disabled { opacity: .55; cursor: not-allowed; }

  /* Sticky Footerï¼ˆæ¯é éƒ½æœƒçœ‹åˆ°ï¼‰ */
  .footer {
    border-top: 1px solid var(--border);
    padding: 10px 14px calc(10px + env(safe-area-inset-bottom));
    text-align: center;
    color: var(--muted);
    font-size: var(--footer-size);
    background: rgba(0,0,0,0.15);
    height: var(--footer-h);
    transform: translateY(calc(-1 * var(--kv-offset))); /* éµç›¤æŠ¬å‡ä½ç§» */
  }

  /* ========== æ¯é ç¨ç«‹è¨­å®šå€ï¼ˆå¯é€é è¦†è“‹ï¼‰ ========== */

  /* ç¬¬1é ï¼šé¦–é  */
  .step[data-page="1"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬2é ï¼šåŸºæœ¬è³‡æ–™1 */
  .step[data-page="2"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬3é ï¼šå€‹è³‡å°è¨€A */
  .step[data-page="3"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬4é ï¼šå€‹è³‡1 */
  .step[data-page="4"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬5é ï¼šå€‹è³‡2 */
  .step[data-page="5"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬6é ï¼šè¯çµ¡èˆ‡å­¸æ­· */
  .step[data-page="6"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬7é ï¼šå…¶ä»–è³‡è¨Šå°è¨€ */
  .step[data-page="7"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬8é ï¼šç·Šæ€¥è¯çµ¡äºº */
  .step[data-page="8"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬9é ï¼šçœ·å±¬åŠ ä¿ */
  .step[data-page="9"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬10é ï¼šä¸Šå‚³èªªæ˜ */
  .step[data-page="10"]{ --title-size: 15px; --content-size: 12px; }
  /* éœ€æ±‚ï¼šç¬¬10é çš„æç¤ºèˆ‡éŒ¯èª¤ç½®ä¸­ */
  .step[data-page="10"] .error { text-align: center; }

  /* ç¬¬11é ï¼šä¸Šå‚³å¯¦ä½œ */
  .step[data-page="11"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬12é ï¼šæ ¸æª¢å€ */
  .step[data-page="12"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬13é ï¼šå®Œæˆé  */
  .step[data-page="13"]{ --title-size: 15px; --content-size: 12px; }

  /* ç¬¬10é ï¼šç¯„ä¾‹åœ–ç‰‡æ¨£å¼ï¼ˆå·¦å³æ’ã€å¯è‡ªå‹•ç¸®å°ï¼‰ */
  .samples { 
    display: grid;
    grid-template-columns: 1fr 1fr; /* å·¦å³å…©æ¬„ï¼Œå›ºå®šä¸æ›è¡Œï¼ˆéœ€æ±‚ï¼šä¸è¦ä¸Šä¸‹ï¼‰ */
    gap: var(--sample-gap);
    align-items: start;
    margin-top: 10px; /* èˆ‡ä¸Šæ–¹æ–‡å­—é–“è· */
  }
  .sample-box{
    background: var(--sample-bg);
    border: 1px dashed var(--control-border);
    border-radius: var(--sample-radius);
    padding: var(--sample-pad);
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .sample-img{
    width: 100%;
    height: var(--sample-max-h);   /* è¶…å‡ºå‰‡ä»¥é«˜åº¦é™åˆ¶ï¼Œè‡ªå‹•ç¸®å° */
    object-fit: contain;           /* ç›¡é‡å¡é€²ç›’å­ä¸è£åˆ‡ */
    image-rendering: auto;
  }
  .sample-cap{
    margin-top: 6px;
    font-size: var(--content-size);
    color: var(--muted);
    text-align: center;
  }

  /* æ–°å¢ï¼šä¾ç…§æœ€æ–°éœ€æ±‚ï¼Œç¬¬10é èº«åˆ†è­‰ç¯„ä¾‹æ”¹ç‚ºã€Œä¸Šä¸‹æ’åˆ—ã€è€Œéå·¦å³
     é€éæ›´ç²¾æº–é¸æ“‡å™¨è¦†è“‹ .samples åŸæœ¬çš„ grid-template-columns */
  .step[data-page="10"] .samples {
    grid-template-columns: 1fr; /* æ”¹ç‚ºå–®æ¬„ï¼Œä¸Šä¸‹æ’åˆ— */
  }

  /* ====== ç™»å…¥é®ç½©æ¨£å¼ ====== */
  .gate {
    position: fixed; inset: 0; z-index: 9999;
    background: rgba(0,0,0,0.75);
    display: flex; align-items: center; justify-content: center;
  }
  .gate-card {
    width: min(520px, 92vw);
    background: rgba(30,30,30,0.95);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,.45);
  }
  .gate h3 { margin: 0 0 10px 0; font-size: 16px; text-align: center; }
  .gate p { margin: 6px 0; color: var(--muted); font-size: 13px; text-align: center; }
  .gate .row { margin-top: 12px; text-align: center; } /* æ•´æ’ç½®ä¸­ */
  .gate .row label { text-align: center; }            /* æ¨™ç±¤ç½®ä¸­ */
  .gate .row input {
    display: block; margin: 0 auto; text-align: center; max-width: 320px; /* è¼¸å…¥æ¡†ç½®ä¸­èˆ‡å¯¬åº¦ */
  }
  .gate .error { text-align: center; display:none; }
  .gate-actions { display: flex; gap: 10px; justify-content: center; margin-top: 12px; }
  </style>
</head>
<body>
  <!-- å¯†ç¢¼é€²å…¥é®ç½© -->
  <div class="gate" id="passGate">
    <div class="gate-card">
      <h3>è¼¸å…¥å¯†ç¢¼å¾Œå³å¯å¡«å¯«</h3>
      <p>è«‹å‘äººè³‡æ‰¿è¾¦ç´¢å–å¯†ç¢¼</p>
      <div class="row">
        <label for="gatePwd">è¼¸å…¥å¯†ç¢¼</label>
        <input id="gatePwd" type="password" placeholder="è«‹è¼¸å…¥å¯†ç¢¼" />
        <div class="error" id="gatePwdErr">âŒ å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹å†è©¦ä¸€æ¬¡</div>
      </div>
      <div class="gate-actions">
        <button class="btn" id="gatePwdStart" type="button">é–‹å§‹å¡«å¯«</button>
      </div>
    </div>
  </div>

  <div class="container" role="region" aria-label="å‹å·¥åå¡ åˆ†æ­¥è¡¨å–®" data-group="g1">
    <header class="header">
      <div class="header-title">ğŸ“ å‹å·¥åå¡å»ºæª”è¡¨</div>
      <div class="header-step" id="headerStep">ç¬¬01é /å…±13é </div>
    </header>

    <main class="content" id="content">
      <!-- ç¬¬1é  -->
      <section class="step active" data-page="1" id="step-1">
        <h2>â° æ³¨æ„äº‹é …</h2>
        <ol class="note-list">
          <li>è«‹ä¾ç…§æ¯é è¡¨å–®æŒ‡ç¤ºåŸ·è¡Œå¡«å¯«.</li>
          <li>ä¸Šå‚³ä¹‹å€‹äººèº«åˆ†æ–‡ä»¶æ‚‰ä¾ç›¸é—œæ³•ä»¤è¦ç¯„è¾¦ç†ä¿å­˜.</li>
          <li>å¡«å¯«è¡¨å–®è‹¥é‡åˆ°å›°é›£è«‹å‘æ‰¿è¾¦äººæå‡ºç¦®è²Œè©¢å•.</li>
          <li>è‹¥æœ‰å•é¡Œä¸ç¢ºå®šè³‡è¨Š,è«‹å…ˆè©¢å•å¾Œå†è¡Œå¡«å¯«.</li>
          <li>b1.0.0-11-13-2025-114</li>
        </ol>

        <div class="fieldset center-block">
          <div style="font-weight:800;">æ˜¯å¦åŒæ„ä¸Šè¿°äº‹é …</div>
          <div class="radio-row" role="radiogroup" aria-label="æ˜¯å¦åŒæ„ä¸Šè¿°äº‹é …">
            <label><input type="radio" name="agree1" value="yes"> æ˜¯</label>
            <label><input type="radio" name="agree1" value="no"> å¦</label>
          </div>
          <div class="exit" id="exitMsg">ğŸ‘‹ å°šæœªé–‹å§‹,å°±è¦çµæŸ,å†æœƒäº†...</div>
        </div>
      </section>

      <!-- ç¬¬2é ï¼šåŸºæœ¬è³‡æ–™â‘  -->
      <section class="step" data-page="2" id="step-2">
        <div class="row">
          <label for="corp">Â© å…¬å¸åç¨± <small>â å¡«å¯«å…¬å¸åç¨±æˆ–å®Œæ•´åº—å</small></label>
          <input id="corp" type="text" placeholder="è«‹è¼¸å…¥å…¬å¸åç¨±/åº—å" />
          <div class="error" id="errCorp">âš ï¸ æ­¤æ¬„ä½ä¸å¾—ç‚ºç©º</div>
        </div>

        <div class="row">
          <label for="team">Â© éš¸å±¬åœ˜éšŠ <small>â è‹¥ä¸ç¢ºå®šæ­¸å±¬,è«‹è©¢å•é¢è©¦ä¸»ç®¡å¾Œå†è¡Œé»é¸</small></label>
          <select id="team">
            <option value="" selected disabled>è«‹é¸æ“‡</option>
            <option>å¤–å ´-Serve Teams</option>
            <option>å§æª¯-Bar Teams</option>
            <option>å…§å»š-Kitchen Teams</option>
            <option>æ”¶éŠ€-Cashier Teams</option>
            <option>å…¬é—œ-Public Relations Teams</option>
            <option>å…¶ä»–-Other</option>
          </select>
          <div class="error" id="errTeam">âš ï¸ å°šæœªé¸æ“‡éš¸å±¬åœ˜éšŠ</div>
        </div>

        <div class="row">
          <label for="workType">Â© å·¥ä½œå‹æ…‹ <small>â è‹¥ä¸ç¢ºå®šéƒ¨é–€,è«‹è©¢å•é¢è©¦ä¸»ç®¡å¾Œå†è¡Œé»é¸</small></label>
          <select id="workType">
            <option value="" selected disabled>è«‹é¸æ“‡</option>
            <option>æ­£è·/å…¨æ™‚å·¥æ™‚-Full Time</option>
            <option>å…¼è·/éƒ¨åˆ†å·¥æ™‚-Part Time</option>
          </select>
          <div class="error" id="errWorkType">âš ï¸ å°šæœªé¸æ“‡å·¥ä½œå‹æ…‹</div>
        </div>

        <div class="row">
          <label for="startDate">Â© åˆ°è·æ—¥æœŸ <small>â è«‹ä»¥YYYY-MM-DDæ ¼å¼å¡«å¯«</small></label>
          <input id="startDate" type="text" placeholder="ç¯„ä¾‹ â˜›2025-11-12" />
          <div class="error" id="errStartDate">âš ï¸ æ—¥æœŸæ ¼å¼éŒ¯èª¤æˆ–ä¸å­˜åœ¨</div>
        </div>

        <div class="row">
          <label for="wage">Â© ç´„å®šå·¥è³‡ <small>â åƒåˆ†ä½é ˆé€—è™Ÿï¼Œä¸”é€—è™Ÿç‚ºåŠå½¢ä¸”ä½ç½®é ˆæ­£ç¢º</small></label>
          <input id="wage" type="text" placeholder="ç¯„ä¾‹ â˜›40,000æˆ–200" />
          <div class="error" id="errWage">âš ï¸ è«‹è¼¸å…¥æ­£ç¢ºæ ¼å¼</div>
        </div>
      </section>

      <!-- ç¬¬3é ï¼šå€‹äººè³‡è¨Š -->
      <section class="step" data-page="3" id="step-3">
        <h2>ğŸª§ å€‹äººè³‡è¨Š</h2>
        <ol class="note-list">
          <li>è«‹ä¾ç…§ä¸‹åˆ—å•é¡ŒæŒ‡ç¤ºåŸ·è¡Œå¡«å¯«.</li>
          <li>å¡«å¯«è¡¨å–®è‹¥é‡åˆ°å›°é›£è«‹å‘æ‰¿è¾¦äººæå‡ºç¦®è²Œè©¢å•.</li>
          <li>è‹¥æœ‰å•é¡Œä¸ç¢ºå®šè³‡è¨Š,è«‹å…ˆè©¢å•å¾Œå†è¡Œå¡«å¯«.</li>
        </ol>
        <div class="fieldset center-block">
          <div style="font-weight:800; margin-bottom:8px;">æ˜¯å¦åŒæ„ä¸Šè¿°äº‹é …</div>
          <div class="radio-row" role="radiogroup">
            <label><input type="radio" name="agreeInfo" value="yes"> æ˜¯</label>
            <label><input type="radio" name="agreeInfo" value="no"> å¦</label>
          </div>
          <div class="error" id="errAgreeInfo">âš ï¸ éœ€åŒæ„æ‰å¯ç¹¼çºŒå¡«å¯«</div>
        </div>
      </section>

      <!-- ç¬¬4é ï¼šå€‹è³‡â‘  -->
      <section class="step" data-page="4" id="step-4">
        <div class="row">
          <label for="fullName">Â© æœ¬å</label>
          <input id="fullName" type="text" placeholder="è«‹è¼¸å…¥æœ¬å" />
          <div class="error" id="errFullName">âš ï¸ æ­¤æ¬„ä½ä¸å¾—ç‚ºç©º</div>
        </div>

        <div class="row">
          <label for="gender">Â© æ€§åˆ¥ <small>â ä»¥èº«åˆ†è­‰ç‚ºä¸»</small></label>
          <select id="gender">
            <option value="" selected disabled>è«‹é¸æ“‡</option>
            <option>ç”·</option>
            <option>å¥³</option>
            <option>å¤šå…ƒ</option>
          </select>
          <div class="error" id="errGender">âš ï¸ å°šæœªè«‹é¸æ“‡æ€§åˆ¥</div>
        </div>

        <div class="row">
          <label for="nid">Â© èº«åˆ†è­‰å­—è™Ÿ <small>â å…±è¨ˆ10ç¢¼</small></label>
          <input id="nid" type="text" placeholder="ç¯„ä¾‹ â˜›A123456789" />
          <div class="error" id="errNid">âš ï¸ æ ¼å¼æˆ–å¡«å¯«éŒ¯èª¤</div>
        </div>
      </section>

      <!-- ç¬¬5é ï¼šå€‹è³‡â‘¡ -->
      <section class="step" data-page="5" id="step-5">
        <div class="row">
          <label for="birthRoc7">Â© æ°‘åœ‹å‡ºç”Ÿå¹´æœˆæ—¥ <small>â è«‹ä»¥yyyMMddæ ¼å¼å¡«å¯«,å…±7ç¢¼</small></label>
          <input id="birthRoc7" type="text" placeholder="ç¯„ä¾‹ â˜›1121008æˆ–0750819" />
          <div class="error" id="errBirthRoc7">âš ï¸ æ ¼å¼é ˆç‚º7ç¢¼,yyyMMdd</div>
        </div>

        <div class="row">
          <label for="birthPlace">Â© å‡ºç”Ÿåœ° <small>â å¯æŸ¥çœ‹èº«åˆ†è­‰èƒŒé¢</small></label>
          <input id="birthPlace" type="text" placeholder="è«‹è¼¸å…¥å‡ºç”Ÿåœ°" />
          <div class="error" id="errBirthPlace">âš ï¸ æ­¤æ¬„ä½ä¸å¾—ç‚ºç©º</div>
        </div>

        <div class="row">
          <label for="addrHouse">Â© æˆ¶ç±åœ°å€ <small>â å¯æŸ¥çœ‹èº«åˆ†è­‰èƒŒé¢,åŒ…å«é‡ŒåŠé„°éƒ½é ˆå¡«å¯«</small></label>
          <input id="addrHouse" type="text" placeholder="è«‹è¼¸å…¥æˆ¶ç±åœ°å€" />
          <div class="error" id="errAddrHouse">âš ï¸ æ­¤æ¬„ä½ä¸å¾—ç‚ºç©º</div>
        </div>

        <div class="row">
          <label for="addrLive">Â© å±…ä½åœ°å€ <small>â å‹¿å¡«å¯«åŒæˆ¶ç±åœ°</small></label>
          <input id="addrLive" type="text" placeholder="è«‹è¼¸å…¥å±…ä½åœ°å€" />
          <div class="error" id="errAddrLive">âš ï¸ ä¸å¾—ç‚ºç©º,ä¹Ÿä¸å¾—å¡«åŒæˆ¶ç±åœ°</div>
        </div>
      </section>

      <!-- ç¬¬6é ï¼šè¯çµ¡èˆ‡å­¸æ­· -->
      <section class="step" data-page="6" id="step-6">
        <div class="row">
          <label for="gmail">Â© Gmail <small>â é™å®šGmailä¸¦å…¨ç¨‹å°å¯«</small></label>
          <input id="gmail" type="email" placeholder="è«‹è¼¸å…¥mail" />
          <div class="error" id="errGmail">âš ï¸ è«‹è¼¸å…¥æœ‰æ•ˆGmailä¸¦ä½¿ç”¨å°å¯«</div>
        </div>

        <div class="row">
          <label for="mobile">Â© è¯çµ¡æ‰‹æ©Ÿ <small>â è«‹ä»¥09xx-xxx-xxxæ ¼å¼å¡«å¯«</small></label>
          <input id="mobile" type="text" placeholder="ç¯„ä¾‹ â˜›0912-345-647" />
          <div class="error" id="errMobile">âš ï¸ æ ¼å¼éŒ¯èª¤</div>
        </div>

        <div class="row">
          <label for="edu">Â© æœ€é«˜å­¸æ­· <small>â å¦‚å°±è®€ä¸­,è«‹åœ¨å­¸æ ¡åç¨±å¾ŒåŠ ä¸Š(åœ¨å­¸)</small></label>
          <input id="edu" type="text" placeholder="è«‹è¼¸å…¥æœ€é«˜å­¸æ­·" />
          <div class="error" id="errEdu">âš ï¸ æ­¤æ¬„ä½ä¸å¾—ç‚ºç©º</div>
        </div>
      </section>

      <!-- ç¬¬7é ï¼šå…¶ä»–è³‡è¨Š -->
      <section class="step" data-page="7" id="step-7">
        <h2>ğŸš¨ å…¶ä»–è³‡è¨Š</h2>
        <ol class="note-list">
          <li>è«‹ä¾ç…§ä¸‹åˆ—å•é¡ŒæŒ‡ç¤ºåŸ·è¡Œå¡«å¯«.</li>
          <li>å¡«å¯«è¡¨å–®è‹¥é‡åˆ°å›°é›£è«‹å‘æ‰¿è¾¦äººæå‡ºç¦®è²Œè©¢å•.</li>
          <li>è‹¥æœ‰å•é¡Œä¸ç¢ºå®šè³‡è¨Š,è«‹å…ˆè©¢å•å¾Œå†è¡Œå¡«å¯«.</li>
        </ol>
        <div class="fieldset center-block">
          <div style="font-weight:800; margin-bottom:8px;">æ˜¯å¦åŒæ„ä¸Šè¿°äº‹é …</div>
          <div class="radio-row" role="radiogroup">
            <label><input type="radio" name="agreeOther" value="yes"> æ˜¯</label>
            <label><input type="radio" name="agreeOther" value="no"> å¦</label>
          </div>
          <div class="error" id="errAgreeOther">âš ï¸ éœ€åŒæ„æ‰å¯ç¹¼çºŒå¡«å¯«</div>
        </div>
      </section>

      <!-- ç¬¬8é ï¼šç·Šæ€¥è¯çµ¡äºº -->
      <section class="step" data-page="8" id="step-8">
        <div class="row">
          <label for="emgName">Â© ç·Šæ€¥é€£çµ¡äºº</label>
          <input id="emgName" type="text" placeholder="è«‹è¼¸å…¥å§“å" />
          <div class="error" id="errEmgName">âš ï¸ æ­¤æ¬„ä¸å¾—ç‚ºç©º</div>
        </div>

        <div class="row">
          <label for="emgRel">Â© é—œä¿‚</label>
          <input id="emgRel" type="text" placeholder="ç¯„ä¾‹ â˜›çˆ¶å­ã€å§Šå¦¹" />
          <div class="error" id="errEmgRel">âš ï¸æ­¤æ¬„ä¸å¾—ç‚ºç©º</div>
        </div>

        <div class="row">
          <label for="homePhone">Â© å®¤å…§é›»è©± <small>â è‹¥ç„¡å®¤å…§é›»è©±,å‰‡å¡«å¯«ã€Œç„¡ã€</small></label>
          <input id="homePhone" type="text" placeholder="è«‹è¼¸å…¥å®¶ç”¨é›»è©±" />
          <div class="error" id="errHomePhone">âš ï¸ æ­¤æ¬„ä¸å¾—ç‚ºç©º</div>
        </div>

        <div class="row">
          <label for="emgMobile">Â© é€£çµ¡æ‰‹æ©Ÿ <small>â è«‹ä»¥09xx-xxx-xxxæ ¼å¼å¡«å¯«</small></label>
          <input id="emgMobile" type="text" placeholder="ç¯„ä¾‹ â˜›0912-345-647" />
          <div class="error" id="errEmgMobile">âš ï¸ æ ¼å¼éŒ¯èª¤</div>
        </div>

        <div class="row">
          <label for="emgAddr">Â© è¯çµ¡åœ°å€ <small>â å‹¿å¡«å¯«åŒæˆ¶ç±åœ°</small></label>
          <input id="emgAddr" type="text" placeholder="è«‹è¼¸å…¥è¯çµ¡åœ°å€" />
          <div class="error" id="errEmgAddr">âš ï¸ ä¸å¾—ç‚ºç©º,ä¹Ÿä¸å¾—å¡«åŒæˆ¶ç±åœ°</div>
        </div>
      </section>

      <!-- ç¬¬9é ï¼šçœ·å±¬åŠ ä¿ -->
      <section class="step" data-page="9" id="step-9">
        <div class="row">
          <label for="depEnable">Â© çœ·å±¬æ˜¯å¦ä¾é™„åŠ ä¿</label>
          <select id="depEnable">
            <option value="" selected disabled>è«‹é¸æ“‡</option>
            <option>æ˜¯</option>
            <option>å¦</option>
          </select>
          <div class="error" id="errDepEnable">âš ï¸ è«‹é¸æ“‡æ˜¯å¦çœ·å±¬ä¾é™„åŠ ä¿</div>
        </div>

        <div id="depFields" style="display:none;">
          <div class="row">
            <label for="depRel">Â© é—œä¿‚<small>â è‹¥æœ‰å…©äººä»¥ä¸Š,ä»¥é€—è™Ÿåˆ†éš”ä¹‹</small></label>
            <input id="depRel" type="text" placeholder="ç¯„ä¾‹ â˜›çˆ¶å­,å§Šå¦¹" />
            <div class="error" id="errDepRel">âš ï¸ æ­¤æ¬„ä¸å¾—ç‚ºç©º</div>
          </div>

          <div class="row">
            <label for="depName">Â© å§“å</label>â è‹¥æœ‰å…©äººä»¥ä¸Š,ä»¥é€—è™Ÿåˆ†éš”ä¹‹
            <input id="depName" type="text" placeholder="ç¯„ä¾‹ â˜›å­«æ‚Ÿç©ºã€å­«æ‚Ÿé£¯" />
            <div class="error" id="errDepName">âš ï¸ æ­¤æ¬„ä¸å¾—ç‚ºç©º</div>
          </div>

          <div class="row">
            <label for="depNid">Â© èº«åˆ†è­‰å­—è™Ÿ <small>â å…±è¨ˆ10ç¢¼</small></label>
            <input id="depNid" type="text" placeholder="ç¯„ä¾‹ â˜›A123456789" />
            <div class="error" id="errDepNid">âš ï¸ å¡«å¯«æˆ–æ ¼å¼éŒ¯èª¤</div>
          </div>

          <div class="row">
            <label for="depBirth7">Â© æ°‘åœ‹å‡ºç”Ÿå¹´æœˆæ—¥ <small>â è«‹ä»¥yyyMMddæ ¼å¼å¡«å¯«,å…±7ç¢¼</small></label>
            <input id="depBirth7" type="text" placeholder="ç¯„ä¾‹ â˜›1121008æˆ–0750819" />
            <div class="error" id="errDepBirth7">âš ï¸ æ ¼å¼é ˆç‚º7ç¢¼yyyMMdd</div>
          </div>
        </div>
      </section>

      <!-- ç¬¬10é ï¼šä¸Šå‚³æª”æ¡ˆ -->
      <section class="step" data-page="10" id="step-10">
        <h2>â« ä¸Šå‚³æª”æ¡ˆ</h2>
        <ol class="note-list">
          <li>è«‹è©³é–±åº•ä¸‹SOP.</li>
          <li>ä¸Šå‚³ä¹‹å€‹äººèº«åˆ†æ–‡ä»¶.</li>
          <li>æª”æ¡ˆé ˆç¬¦åˆæœ¬å…¬å¸é™å®šè¦æ ¼.</li>
        </ol>

        <!-- //* --------ç¬¬10é ï¼šç¯„ä¾‹åœ–ç‰‡å€--------*// -->
        <div class="samples" aria-label="èº«åˆ†è­‰ç¯„æœ¬">
          <figure class="sample-box">
            <img class="sample-img" src="assets/èº«åˆ†è­‰ç¯„æœ¬-æ­£é¢.jpg" alt="â—ï¸ç¯„ä¾‹-èº«åˆ†è­‰ä¸Šå‚³é™å®šè¦æ ¼-æ­£é¢">
            <figcaption class="sample-cap">â—ï¸ç¯„ä¾‹-èº«åˆ†è­‰ä¸Šå‚³é™å®šè¦æ ¼-æ­£é¢</figcaption>
          </figure>
          <figure class="sample-box">
            <img class="sample-img" src="assets/èº«åˆ†è­‰ç¯„æœ¬-èƒŒé¢.png" alt="â—ï¸ç¯„ä¾‹-èº«åˆ†è­‰ä¸Šå‚³é™å®šè¦æ ¼-èƒŒé¢">
            <figcaption class="sample-cap">ç¯„ä¾‹-èº«åˆ†è­‰ä¸Šå‚³é™å®šè¦æ ¼-èƒŒé¢</figcaption>
          </figure>
        </div>
        <!-- //* --------ç¬¬10é ï¼šç¯„ä¾‹åœ–ç‰‡å€--------*// -->

        <!-- éœ€æ±‚ï¼šç¬¬10é  åŒæ„èˆ‡éŒ¯èª¤ç½®ä¸­ â†’ å¥—ç”¨ center-block -->
        <div class="fieldset center-block" style="margin-top:16px;">
          <div style="font-weight:800; margin-bottom:8px;">æ˜¯å¦åŒæ„ä¸Šè¿°äº‹é …</div>
          <div class="radio-row" role="radiogroup">
            <label><input type="radio" name="agreeUpload" value="yes"> æ˜¯</label>
            <label><input type="radio" name="agreeUpload" value="no"> å¦</label>
          </div>
          <div class="error" id="errAgreeUpload">âš ï¸ éœ€åŒæ„æ‰å¯ç¹¼çºŒå¡«å¯«</div>
        </div>
      </section>

      <!-- ç¬¬11é ï¼šä¸Šå‚³èº«åˆ†è­‰æ­£é¢/åé¢ -->
      <section class="step" data-page="11" id="step-11">
        <div class="file-row">
          <div>èº«åˆ†è­‰æ­£é¢</div>
          <label class="file-input">
            <span class="file-btn">é¸æ“‡æª”æ¡ˆ</span>
            <input id="idFront" type="file" accept=".pdf,image/*" />
          </label>
          <div class="file-name" id="nameFront">å°šæœªé¸å–æª”æ¡ˆ</div>
        </div>
        <!-- æ–°å¢ï¼šèº«åˆ†è­‰æ­£é¢ä¸Šå‚³å‰çš„å°ç¸®åœ–é è¦½å€ï¼ˆå¯ä¾éœ€æ±‚èª¿æ•´æˆ–åˆªé™¤ï¼‰ -->
        <div class="file-preview" id="previewFront"></div>

        <div class="error" id="errFront">âš ï¸ è«‹é¸æ“‡èº«åˆ†è­‰æ­£é¢æª”æ¡ˆ</div>

        <div class="file-row">
          <div>èº«åˆ†è­‰åé¢</div>
          <label class="file-input">
            <span class="file-btn">é¸æ“‡æª”æ¡ˆ</span>
            <input id="idBack" type="file" accept=".pdf,image/*" />
          </label>
          <div class="file-name" id="nameBack">å°šæœªé¸å–æª”æ¡ˆ</div>
        </div>
        <!-- æ–°å¢ï¼šèº«åˆ†è­‰åé¢ä¸Šå‚³å‰çš„å°ç¸®åœ–é è¦½å€ï¼ˆå¯ä¾éœ€æ±‚èª¿æ•´æˆ–åˆªé™¤ï¼‰ -->
        <div class="file-preview" id="previewBack"></div>

        <div class="error" id="errBack">âš ï¸ è«‹é¸æ“‡èº«åˆ†è­‰åé¢æª”æ¡ˆ</div>

        <div class="fieldset">
          <div class="checks">
            <label><input type="checkbox" id="chk1"> 1. æ–‡ä»¶æ¸…æ™°ä¸”ç„¡åå…‰</label>
            <label><input type="checkbox" id="chk2"> 2. è­‰ä»¶å››é‚Šå®Œæ•´å…¥é¡</label>
            <label><input type="checkbox" id="chk3"> 3. æ–‡ä»¶ã€Œå®Œæ•´ã€å°æº–åœ¨æ¡†æ¡†å…§</label>
            <label><input type="checkbox" id="chk4"> 4. ä¸Šè¿°éƒ½å·²ç¢ºèªå®Œæˆå‹•ä½œ</label>
          </div>
          <div class="note-list" style="margin-left:0;">
            ğŸ“£ è‹¥ä½¿ç”¨<strong>å‚™å¿˜éŒ„</strong>æƒæ,è«‹å…ˆã€Œåˆ†äº«â†’å­˜åˆ°æª”æ¡ˆæˆ–å­˜ç‚ºPDFã€å¾Œ,å†ç”±ã€Œæª”æ¡ˆ/é›²ç«¯ã€æŒ‘é¸ä¸Šå‚³
          </div>
        </div>
      </section>

      <!-- ç¬¬12é ï¼šâ—ï¸è³‡æ–™é€å‡ºå‰-æ ¸æª¢å€ï¼ˆæ”¹ç‚º 7 å€‹å‹¾é¸ï¼›ä¸é¡¯ç¤ºéŒ¯èª¤ï¼‰ -->
      <section class="step" data-page="12" id="step-12">
        <h2>â—ï¸è³‡æ–™é€å‡ºå‰-æ ¸æª¢å€</h2>
        <div class="fieldset">
          <div class="checks">
            <label><input type="checkbox" id="pre1"> è«‹ä»”ç´°æ€è€ƒèªçœŸå¡«å¯«æ­¤è¡¨å–®.</label>
            <label><input type="checkbox" id="pre2"> ä»¥ä¸Šè¼¸å…¥è³‡æ–™éƒ½é€²è¡Œé›™é‡ç¢ºèª.</label>
            <label><input type="checkbox" id="pre3"> æœ¬äººè²æ˜ç„¡å½é€ ä¹‹ä¸æ³•æƒ…å½¢.</label>
            <label><input type="checkbox" id="pre4"> ä¸Šå‚³æª”æ¡ˆéƒ½ç¬¦åˆæœ¬å…¬å¸æ ¼å¼.</label>
            <label><input type="checkbox" id="pre5"> æœ¬è¡¨å–®æœ‰æä¾›æª¢æ ¸è¡¨ï¼Œè«‹ç¢ºå¯¦æª¢æŸ¥å¾Œå†å‹¾é¸.</label>
            <label><input type="checkbox" id="pre6"> 5-1. è‹¥å‹¾é¸å¾Œé‚„å¡«å¯«éŒ¯èª¤ï¼Œè«‹è‡ªè² è²¬ä»».</label>
            <label><input type="checkbox" id="pre7"> æäº¤è¡¨å–®å¾Œï¼Œè«‹å®Œæˆæˆªåœ–å›å ±æ©Ÿåˆ¶.</label>
          </div>
          <!-- ä¾éœ€æ±‚ï¼šä¸é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ï¼Œåƒ…ä»¥æŒ‰éˆ•å•Ÿç”¨æ§åˆ¶ -->
        </div>
      </section>

      <!-- ç¬¬13é ï¼šå®Œæˆ -->
      <section class="step" data-page="13" id="step-13">
        <h2>âœ… å…¨æ•¸å®Œæˆ</h2> <!-- ä¿®æ­£ï¼šåˆæ³• h2 æ¨™ç±¤ -->
        <div style="text-align:center; line-height:1.8;">
          Â© å‹å·¥åå¡ç™»è¨˜è¡¨
          <hr style="border:0;border-top:1px solid var(--border);margin:10px 0;">
          <div>â—ï¸è«‹æˆªåœ–æ­¤ç•«é¢çµ¦æ‰¿è¾¦äºº</div>
          <hr style="border:0;border-top:1px solid var(--border);margin:10px 0;">
          <div>ç³»çµ±å·²æ”¶åˆ°è³‡æ–™,å°‡é€²å…¥è™•ç†æ’ç¨‹,è¡¨å–®å·²å¡«å¯«å®Œç•¢.</div>
          <!-- æ–°å¢ï¼šæ™‚é–“æˆ³é¡¯ç¤ºï¼ˆCreated / Updatedï¼‰ -->
          <div style="margin-top:10px;color:var(--muted);font-size:11px;">
            å»ºç«‹æ™‚é–“ï¼š<span id="stampCreated">â€”</span>ã€€æœ€å¾Œæ›´æ–°ï¼š<span id="stampUpdated">â€”</span>
          </div>
        </div>
      </section>
    </main>

    <!-- åº•éƒ¨å›ºå®šæ“ä½œåˆ—ï¼ˆå…¨é å…±ç”¨ï¼‰ -->
    <div class="actionbar" id="actionbar">
      <div class="left-actions">
        <!-- èª¿æ•´ï¼šå·¦å´åªæ”¾ã€Œä¸Šä¸€é ã€ -->
        <button class="btn btn--nav" id="btnPrev" type="button">ä¸Šä¸€é </button>
      </div>
      <div class="right-actions" style="display:flex; gap:10px;">
        <!-- èª¿æ•´ï¼šå³å´æ”¾ã€Œä¸‹ä¸€é ã€èˆ‡ã€Œå®Œæˆã€ï¼›å®ŒæˆåŒå°ºå¯¸ -->
        <button class="btn btn--nav" id="btnNext" type="button">ä¸‹ä¸€é </button>
        <button class="btn btn--nav" id="btnFinish" type="button">å®Œæˆ</button>
      </div>
    </div>

    <footer class="footer" id="footer">
      Â© Copyright 2025 MYs System-b1.0.0-11-13
    </footer>
  </div>

<script>

/* --------ç³»çµ±å¸¸æ•¸ï¼ˆå¯èª¿ï¼‰-------- */
const TOTAL_STEPS = 13;  /* ç¸½é æ•¸ï¼ˆé¡¯ç¤ºç”¨ï¼›æ›´æ–°ç‚º 13ï¼›æ–°å¢ï¼‰ */
const ACCESS_PWD = "19860819"; /* æ–°å¢ï¼šé€²å…¥å¯†ç¢¼ï¼ˆå¯èª¿ï¼‰ */

const $  = (sel) => document.querySelector(sel);
const $$ = (sel) => document.querySelectorAll(sel);

/* --------è¡¨å–®æ™‚é–“æˆ³ï¼‰-------- */
const FORM_META = { createdAt: null, updatedAt: null };
function fmtTW(d){
  try{
    return new Intl.DateTimeFormat('zh-TW',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false,timeZone:'Asia/Taipei'}).format(d);
  }catch(e){ return d.toLocaleString(); }
}
function setCreatedNow(){
  if(!FORM_META.createdAt){ FORM_META.createdAt = new Date(); updateStampUI(); }
}
function setUpdatedNow(){
  FORM_META.updatedAt = new Date(); updateStampUI();
}
function updateStampUI(){
  const c = $("#stampCreated"), u = $("#stampUpdated");
  if(c){ c.textContent = FORM_META.createdAt ? fmtTW(FORM_META.createdAt) : "â€”"; }
  if(u){ u.textContent = FORM_META.updatedAt ? fmtTW(FORM_META.updatedAt) : "â€”"; }
}

/* æ–°å¢ï¼šè¡¨å–®é–å®šæ——æ¨™ï¼ˆå®Œæˆå¾Œç¦æ­¢å†ä¿®æ”¹/è¿”å›ï¼›å¯ä¾éœ€æ±‚èª¿æ•´å“ªäº›å…ƒç´ è¦é–ï¼‰ */
let FORM_LOCKED = false;
function lockForm(){
  FORM_LOCKED = true;
  /* æ–°å¢ï¼šå°‡æ‰€æœ‰ input / select / button é–å®šï¼ˆè‹¥æœ‰éœ€è¦ä¿ç•™å¯æ“ä½œçš„æŒ‰éˆ•ï¼Œå¯åœ¨æ­¤æ’é™¤ï¼‰ */
  document.querySelectorAll("input, select, button").forEach(el => {
    el.disabled = true;
  });
}

/* ====== å¯†ç¢¼é€²å…¥é®ç½© ====== */
(function passGateInit(){
  const gate = $("#passGate"), pwd = $("#gatePwd"), btn = $("#gatePwdStart"), err=$("#gatePwdErr");
  if(!gate) return;
  err.style.display = "none";
  btn.addEventListener("click", ()=>{
    const v = (pwd.value||"").trim();
    if(v !== ACCESS_PWD){ err.style.display="block"; return; }
    err.style.display="none";
    gate.style.display="none";
    setCreatedNow(); /* æˆåŠŸé€²å…¥å³ç´€éŒ„å»ºç«‹æ™‚é–“ */
    autoFitActionbarHeight(); /* é€²å…¥å¾Œç«‹åˆ»é‡æ¸¬æ“ä½œåˆ—é«˜åº¦ */
  });
})();

/* ====== éµç›¤å½ˆå‡ºèª¿æ•´ï¼ˆVisualViewportï¼‰ ====== */
(function keyboardLift(){
  const vv = window.visualViewport;
  if(!vv) return;
  function apply(){
    const bottomInset = (window.innerHeight - vv.height - vv.offsetTop);
    document.documentElement.style.setProperty('--kv-offset', bottomInset>0 ? `${bottomInset}px` : '0px');
    autoFitActionbarHeight(); /* éµç›¤è®Šå‹•æ™‚ä¸€ä½µé‡é‡æ¸¬ actionbar é«˜åº¦ */
  }
  vv.addEventListener('resize', apply);
  vv.addEventListener('scroll', apply);
  window.addEventListener('resize', apply); /* ä¸€èˆ¬ resize ä¹Ÿæ ¡æ­£ï¼ˆé¿å…æ¢å¾©ä¸å›ä¾†ï¼‰ */
  apply();
})();

/* è‡ªå‹•é‡æ¸¬ actionbar é«˜åº¦ â†’ å¯«å› --actionbar-hï¼Œè®“å…§å®¹å¯è¦–å€æ›´å¤§ */
function autoFitActionbarHeight(){
  const bar = $("#actionbar");
  if(!bar) return;
  const h = bar.offsetHeight; /* ä»¥å¯¦éš›å…§å®¹é«˜åº¦ç‚ºæº–ï¼ˆ.actionbar å·²æ”¹æˆ height:autoï¼‰ */
  document.documentElement.style.setProperty('--actionbar-h', `${h}px`);
}

/* ç›£è½æ“ä½œåˆ—å°ºå¯¸è®ŠåŒ–ï¼ˆæ–‡å­—æ›è¡Œ/æŒ‰éˆ•ç‹€æ…‹è®ŠåŒ–æ™‚åŒæ­¥ï¼‰ */
(function observeBar(){
  const bar = $("#actionbar");
  if(!bar || !('ResizeObserver' in window)) return;
  const ro = new ResizeObserver(()=> autoFitActionbarHeight());
  ro.observe(bar);
})();

/* ç„¦é»è‡ªå‹•å¯è¦–ï¼ˆé¿å…è¢«éµç›¤æˆ–æ“ä½œåˆ—æ“‹ä½ï¼‰ */
(function focusAutoScroll(){
  document.addEventListener('focusin', (e)=>{
    const el = e.target;
    if(!(el instanceof HTMLInputElement) && !(el instanceof HTMLSelectElement)) return;
    setTimeout(()=>{ el.scrollIntoView({ block: 'center', behavior: 'smooth' }); }, 50);
  });
})();

/* ====== é©—è­‰å·¥å…· ====== */
function isValidYMD(str){
  if(!/^\d{4}-\d{2}-\d{2}$/.test(str)) return false;
  const [y,m,d]=str.split("-").map(n=>parseInt(n,10));
  const dt = new Date(y, m-1, d);
  return dt.getFullYear()===y && (dt.getMonth()+1)===m && dt.getDate()===d;
}
function isTenAlnum(s){ return /^[A-Za-z0-9]{10}$/.test(s); }
function isValidMobile(s){ return /^09\d{2}-\d{3}-\d{3}$/.test(s); }
/* å·¥è³‡ï¼šå…è¨±ç´”æ•¸å­—æˆ–æ­£ç¢ºåŠå½¢åƒåˆ†ä½ï¼ˆæ•´æ•¸ï¼‰ */
function isValidWageStrict(s){
  if(!s) return false;
  if(/^\d+$/.test(s)) return parseInt(s,10)>0;
  if(/^\d{1,3}(,\d{3})+$/.test(s)) return true;
  return false;
}
/* æ°‘åœ‹ç”Ÿæ—¥ 7 ç¢¼ï¼šyyyMMdd -> è½‰è¥¿å…ƒæª¢æ ¸ */
function isValidRoc7(str){
  if(!/^\d{7}$/.test(str)) return false;
  const y = parseInt(str.slice(0,3),10) + 1911;
  const m = parseInt(str.slice(3,5),10);
  const d = parseInt(str.slice(5,7),10);
  const dt = new Date(y, m-1, d);
  return dt.getFullYear()===y && (dt.getMonth()+1)===m && dt.getDate()===d;
}

/* æ–°å¢ï¼šæª”æ¡ˆä¸Šå‚³å‰çš„å°ç¸®åœ–é è¦½ï¼ˆåƒ…é è¦½åœ–ç‰‡æª”ï¼›PDF é¡¯ç¤ºæ–‡å­—æç¤ºå³å¯ï¼‰ */
function updateFilePreview(inputEl, previewId){
  const box = document.getElementById(previewId);
  if(!box) return;
  box.innerHTML = ""; /* å…ˆæ¸…ç©ºèˆŠé è¦½ */

  const file = inputEl.files && inputEl.files[0];
  if(!file) return;

  if(file.type && file.type.startsWith("image/")){
    const img = document.createElement("img");
    img.className = "file-thumb";     /* å°æ‡‰ .file-preview .file-thumb æ¨£å¼ */
    img.alt = "ä¸Šå‚³é è¦½ç¸®åœ–";
    img.src = URL.createObjectURL(file);
    box.appendChild(img);
  } else {
    /* éåœ–ç‰‡æª”ï¼ˆä¾‹å¦‚ PDFï¼‰é¡¯ç¤ºç°¡çŸ­æ–‡å­—ï¼Œé¿å…ä½¿ç”¨è€…ä»¥ç‚ºå£æ‰ */
    const note = document.createElement("div");
    note.className = "file-note";
    note.textContent = "éåœ–ç‰‡æª”ï¼Œé è¦½ç•¥éï¼ˆæª”åå·²é¡¯ç¤ºæ–¼å³å´ï¼‰";
    box.appendChild(note);
  }
}

/* ====== å‹•æ…‹å‰ç¶´é©—è­‰ï¼ˆåªæœ‰ã€Œä¸å¯èƒ½æˆç«‹ã€æˆ– onblur æ‰é¡¯ç¤ºéŒ¯èª¤ï¼‰ ====== */
function mobilePrefixOK(v){
  // ç›®æ¨™æ ¼å¼ï¼š09dd-ddd-ddd
  // é€ä½æª¢æŸ¥ï¼›ä»»ä½•æ™‚é»åªè¦ä¸å¯èƒ½æˆç«‹å°± false
  const len = v.length;
  for(let i=0;i<len;i++){
    const ch = v[i];
    if(i===0){ if(ch!=='0') return false; continue; }
    if(i===1){ if(ch!=='9') return false; continue; }
    if(i===4 || i===8){ if(ch!=='-') return false; continue; }
    if(i!==4 && i!==8){
      if(ch<'0' || ch>'9') return false;
    }
  }
  // ä¸æª¢æŸ¥é•·åº¦è¶³å¤ èˆ‡å¦ï¼Œäº¤ç”± onblur/æäº¤æ™‚åšå®Œæ•´é©—è­‰
  return true;
}
function ymdPrefixOK(v){
  // ç›®æ¨™ï¼šYYYY-MM-DDï¼›åœ¨ index 4 èˆ‡ 7 å¿…é ˆæ˜¯ '-'
  for(let i=0;i<v.length;i++){
    const ch = v[i];
    if(i===4 || i===7){ if(ch!=='-') return false; }
    else {
      if(ch<'0' || ch>'9') return false;
    }
  }
  return true;
}
function wagePrefixOK(v){
  // å…è¨±ï¼š^\d{1,3}(,\d{0,3})*$ï¼›ä½†é™¤äº†æœ€å¾Œä¸€çµ„ä¹‹å¤–ï¼Œé€—è™Ÿå¾Œé¢å¿…é ˆæ»¿ 3 ä½
  if(v==="" ) return true;
  if(!/^[\d,]+$/.test(v)) return false;
  const parts = v.split(",");
  if(parts[0].length<1 || parts[0].length>3 || !/^\d+$/.test(parts[0])) return false;
  for(let i=1;i<parts.length;i++){
    const seg = parts[i];
    if(i < parts.length-1){
      if(!/^\d{3}$/.test(seg)) return false; // ä¸­é–“æ®µå¿…é ˆå‰›å¥½ 3 ä½
    }else{
      if(!/^\d{0,3}$/.test(seg)) return false; // æœ€æœ«æ®µ 0~3 ä½çš†å¯ï¼ˆè¼¸å…¥ä¸­ï¼‰
    }
  }
  return true;
}
function alnumPrefixOK(v, max){ return v.length<=max && /^[A-Za-z0-9]*$/.test(v); }
function digitsPrefixOK(v, max){ return v.length<=max && /^\d*$/.test(v); }

/* è§¸ç¢°ç‹€æ…‹ï¼ˆtouchedï¼‰èˆ‡å»¶å¾Œé¡¯ç¤ºéŒ¯èª¤é‚è¼¯ */
const TOUCHED = Object.create(null);
function markTouched(id){ if(id) TOUCHED[id] = true; }
function shouldShowErr(id, submit){ return !!submit || !!TOUCHED[id]; }

/* ====== æ­¥é©Ÿé¡¯ç¤ºèˆ‡é¢æ¿èƒŒæ™¯åˆ†çµ„ ====== */
let currentPage = 1;
function pad2(n){ return String(n).padStart(2,'0'); }
function updateHeaderStep(){
  const btnPrev = $("#btnPrev"), btnNext = $("#btnNext"), btnFinish=$("#btnFinish");
  $("#headerStep").textContent = `ç¬¬${pad2(currentPage)}é /å…±${TOTAL_STEPS}é `;
  const group = currentPage<=6 ? "g1" : (currentPage<=9 ? "g2" : "g3");
  $(".container").setAttribute("data-group", group);
}
function showStep(pageNumber){
  $$(".step").forEach(s=>s.classList.remove("active"));
  const el = document.getElementById(`step-${pageNumber}`);
  if(el) el.classList.add("active");
  currentPage = pageNumber;
  updateHeaderStep();
  $("#content").scrollTo({ top: 0, behavior: "instant" });
  updateNavState();
}

/* ====== å„é é©—è­‰ï¼ˆsubmit=falseï¼šä¸é¡¯ç¤ºç´…å­—ï¼›trueï¼šé¡¯ç¤ºç´…å­—ï¼‰ ====== */
function validatePage(n, submit=false){
  switch(n){
    case 1: {
      const yes = $('input[name="agree1"][value="yes"]').checked;
      const no  = $('input[name="agree1"][value="no"]').checked;
      $("#exitMsg").classList.toggle("show", no && !yes);
      return yes;
    }
    case 2: {
      let ok = true;
      const corp = $("#corp").value.trim();
      const corpInvalid = corp==="";
      $("#errCorp").style.display = (corpInvalid && shouldShowErr("corp", submit)) ? "block" : "none";
      if(corpInvalid) ok=false;

      const teamInvalid = !$("#team").value;
      $("#errTeam").style.display = (teamInvalid && shouldShowErr("team", submit)) ? "block" : "none";
      if(teamInvalid) ok=false;

      const workTypeInvalid = !$("#workType").value;
      $("#errWorkType").style.display = (workTypeInvalid && shouldShowErr("workType", submit)) ? "block" : "none";
      if(workTypeInvalid) ok=false;

      const v1 = $("#startDate").value.trim();
      const startInvalid = !isValidYMD(v1);
      $("#errStartDate").style.display = (startInvalid && shouldShowErr("startDate", submit)) ? "block" : "none";
      if(startInvalid) ok=false;

      const v2 = $("#wage").value.trim();
      const wageInvalid = !isValidWageStrict(v2);
      $("#errWage").style.display = (wageInvalid && shouldShowErr("wage", submit)) ? "block" : "none";
      if(wageInvalid) ok=false;

      return ok;
    }
    case 3: {
      const yes = $('input[name="agreeInfo"][value="yes"]').checked;
      $("#errAgreeInfo").style.display = (!yes && shouldShowErr("agreeInfo", submit)) ? "block":"none";
      return yes;
    }
    case 4: {
      let ok = true;
      const fnInvalid = $("#fullName").value.trim()==="";
      $("#errFullName").style.display = (fnInvalid && shouldShowErr("fullName", submit)) ? "block" : "none";
      if(fnInvalid) ok=false;

      const gInvalid = !$("#gender").value;
      $("#errGender").style.display = (gInvalid && shouldShowErr("gender", submit)) ? "block" : "none";
      if(gInvalid) ok=false;

      const nidInvalid = !isTenAlnum($("#nid").value.trim());
      $("#errNid").style.display = (nidInvalid && shouldShowErr("nid", submit)) ? "block" : "none";
      if(nidInvalid) ok=false;

      return ok;
    }
    case 5: {
      let ok = true;
      const b7Invalid = !isValidRoc7($("#birthRoc7").value.trim());
      $("#errBirthRoc7").style.display = (b7Invalid && shouldShowErr("birthRoc7", submit)) ? "block" : "none";
      if(b7Invalid) ok=false;

      const bpInvalid = $("#birthPlace").value.trim()==="";
      $("#errBirthPlace").style.display = (bpInvalid && shouldShowErr("birthPlace", submit)) ? "block" : "none";
      if(bpInvalid) ok=false;

      const ahInvalid = $("#addrHouse").value.trim()==="";
      $("#errAddrHouse").style.display = (ahInvalid && shouldShowErr("addrHouse", submit)) ? "block" : "none";
      if(ahInvalid) ok=false;

      const live = $("#addrLive").value.trim();
      const alInvalid = (live==="") || /åŒæˆ¶ç±åœ°|åŒæˆ¶ç±/.test(live);
      $("#errAddrLive").style.display = (alInvalid && shouldShowErr("addrLive", submit)) ? "block" : "none";
      if(alInvalid) ok=false;

      return ok;
    }
    case 6: {
      let ok = true;
      const el = $("#gmail");
      let val = el.value.trim().toLowerCase();
      const gInvalid = !/^[a-z0-9._%+-]+@gmail\.com$/.test(val);
      $("#errGmail").style.display = (gInvalid && shouldShowErr("gmail", submit)) ? "block" : "none";
      if(gInvalid) ok=false;

      const mInvalid = !isValidMobile($("#mobile").value.trim());
      $("#errMobile").style.display = (mInvalid && shouldShowErr("mobile", submit)) ? "block" : "none";
      if(mInvalid) ok=false;

      const eInvalid = $("#edu").value.trim()==="";
      $("#errEdu").style.display = (eInvalid && shouldShowErr("edu", submit)) ? "block" : "none";
      if(eInvalid) ok=false;

      return ok;
    }
    case 7: {
      const yes = $('input[name="agreeOther"][value="yes"]').checked;
      $("#errAgreeOther").style.display = (!yes && shouldShowErr("agreeOther", submit)) ? "block":"none";
      return yes;
    }
    case 8: {
      let ok = true;
      const nInvalid = $("#emgName").value.trim()==="";
      $("#errEmgName").style.display = (nInvalid && shouldShowErr("emgName", submit)) ? "block" : "none";
      if(nInvalid) ok=false;

      const rInvalid = $("#emgRel").value.trim()==="";
      $("#errEmgRel").style.display = (rInvalid && shouldShowErr("emgRel", submit)) ? "block" : "none";
      if(rInvalid) ok=false;

      const hInvalid = $("#homePhone").value.trim()==="";
      $("#errHomePhone").style.display = (hInvalid && shouldShowErr("homePhone", submit)) ? "block" : "none";
      if(hInvalid) ok=false;

      const mInvalid = !isValidMobile($("#emgMobile").value.trim());
      $("#errEmgMobile").style.display = (mInvalid && shouldShowErr("emgMobile", submit)) ? "block" : "none";
      if(mInvalid) ok=false;

      const addr = $("#emgAddr").value.trim();
      const aInvalid = (addr==="") || /åŒæˆ¶ç±åœ°|åŒæˆ¶ç±/.test(addr);
      $("#errEmgAddr").style.display = (aInvalid && shouldShowErr("emgAddr", submit)) ? "block" : "none";
      if(aInvalid) ok=false;

      return ok;
    }
    case 9: {
      let ok = true;
      const val = $("#depEnable").value;
      const enInvalid = !val;
      $("#errDepEnable").style.display = (enInvalid && shouldShowErr("depEnable", submit)) ? "block" : "none";
      const show = (val==="æ˜¯");
      $("#depFields").style.display = show ? "block" : "none";
      if(enInvalid) ok=false;

      if(show){
        const rInvalid = $("#depRel").value.trim()==="";
        $("#errDepRel").style.display = (rInvalid && shouldShowErr("depRel", submit)) ? "block" : "none";
        if(rInvalid) ok=false;

        const nInvalid = $("#depName").value.trim()==="";
        $("#errDepName").style.display = (nInvalid && shouldShowErr("depName", submit)) ? "block" : "none";
        if(nInvalid) ok=false;

        const idInvalid = !isTenAlnum($("#depNid").value.trim());
        $("#errDepNid").style.display = (idInvalid && shouldShowErr("depNid", submit)) ? "block" : "none";
        if(idInvalid) ok=false;

        const bInvalid = !isValidRoc7($("#depBirth7").value.trim());
        $("#errDepBirth7").style.display = (bInvalid && shouldShowErr("depBirth7", submit)) ? "block" : "none";
        if(bInvalid) ok=false;
      } else {
        ["errDepRel","errDepName","errDepNid","errDepBirth7"].forEach(id=> $("#"+id).style.display="none");
      }
      return ok;
    }
    case 10: {
      const yes = $('input[name="agreeUpload"][value="yes"]').checked;
      $("#errAgreeUpload").style.display = (!yes && shouldShowErr("agreeUpload", submit)) ? "block":"none";
      return yes;
    }
    case 11: {
      let ok = true;
      const f = $("#idFront").files?.length>0, b = $("#idBack").files?.length>0;
      $("#errFront").style.display = (!f && shouldShowErr("idFront", submit))? "block":"none"; if(!f) ok=false;
      $("#errBack").style.display  = (!b && shouldShowErr("idBack", submit)) ? "block":"none"; if(!b) ok=false;
      const all = ["#chk1","#chk2","#chk3","#chk4"].every(sel=> $(sel).checked);
      if(!all) ok=false;
      return ok;
    }
    case 12: {
      /* æ”¹ç‰ˆï¼šä¸é¡¯ç¤ºéŒ¯èª¤ï¼Œåªåœ¨å…¨é¸æ™‚æ‰å…è¨±é€²å…¥ä¸‹ä¸€é  */
      const all = ["#pre1","#pre2","#pre3","#pre4","#pre5","#pre6","#pre7"].every(sel=> $(sel).checked);
      return all;
    }
    case 13: return true;
  }
  return false;
}

/* ====== åº•éƒ¨æ“ä½œåˆ—ï¼šç‹€æ…‹æ§åˆ¶ ====== */
function updateNavState(){
  const btnPrev = $("#btnPrev"), btnNext = $("#btnNext"), btnFinish=$("#btnFinish");

  /* æ–°å¢ï¼šè‹¥å·²é–å®šè¡¨å–®ï¼Œç›´æ¥æŠŠæŒ‰éˆ•å…¨éƒ¨ disable ä¸¦ä¸­æ­¢æ›´æ–°é‚è¼¯ */
  if(FORM_LOCKED){
    if(btnPrev) btnPrev.disabled = true;
    if(btnNext) btnNext.disabled = true;
    if(btnFinish) btnFinish.disabled = true;
    return;
  }

  btnPrev.disabled = currentPage<=1;
  btnFinish.style.display = currentPage===TOTAL_STEPS ? "inline-block" : "none";
  btnNext.style.display   = currentPage===TOTAL_STEPS ? "none" : "inline-block";
  btnNext.disabled = !validatePage(currentPage, /*submit*/ false); /* åªç®—é€šéèˆ‡å¦ï¼Œä¸é¡¯ç¤ºç´…å­— */
  btnFinish.disabled = currentPage!==TOTAL_STEPS; /* æœ€å¾Œä¸€é æ‰å¯æŒ‰ */
}

/* æ¸…é™¤ç•¶é ï¼ˆå‡½å¼ä¿ç•™ä½†æŒ‰éˆ•å·²ç§»é™¤ï¼‰ */
function clearCurrentPage(){
  const cur = $(`.step.active`); if(!cur) return;
  cur.querySelectorAll('input[type="text"],input[type="email"]').forEach(i=> i.value="");
  cur.querySelectorAll('select').forEach(s=> s.selectedIndex = 0);
  cur.querySelectorAll('input[type="radio"],input[type="checkbox"]').forEach(c=> c.checked=false);
  if(cur.id==="step-11"){
    $("#idFront").value=""; $("#idBack").value="";
    $("#nameFront").textContent="å°šæœªé¸å–æª”æ¡ˆ";
    $("#nameBack").textContent="å°šæœªé¸å–æª”æ¡ˆ";
    /* æ–°å¢ï¼šæ¸…é™¤æª”æ¡ˆç¸®åœ–é è¦½ */
    const pf = $("#previewFront"), pb = $("#previewBack");
    if(pf) pf.innerHTML = "";
    if(pb) pb.innerHTML = "";
  }
  cur.querySelectorAll('.error').forEach(e=> e.style.display="none");
  if(cur.id==="step-1"){ $("#exitMsg").classList.remove("show"); }
  updateNavState();
}

/* ====== äº‹ä»¶ç¶å®šèˆ‡åˆå§‹åŒ– ====== */
function bindLiveValidation(){
  /* ç¬¬1é  */
  $$('input[name="agree1"]').forEach(r=> r.addEventListener('change', ()=>{
    markTouched('agree1'); updateNavState();
  }));
  /* ç¬¬2é  */
  ["#corp","#team","#workType","#startDate","#wage"].forEach(sel=>{
    const el=$(sel); if(!el) return;
    ["input","change","blur"].forEach(evt=> el.addEventListener(evt, ()=>{ markTouched(el.id); }));
    ["input","change"].forEach(evt=> el.addEventListener(evt, updateNavState));
  });
  /* å‹•æ…‹å‰ç¶´ï¼šåˆ°è·æ—¥æœŸ / ç´„å®šå·¥è³‡ */
  $("#startDate")?.addEventListener('input', (e)=>{
    const v = e.target.value.trim();
    const bad = v!=="" && !ymdPrefixOK(v);
    $("#errStartDate").style.display = bad ? "block":"none";
  });
  $("#wage")?.addEventListener('input', (e)=>{
    const v = e.target.value.trim();
    const bad = v!=="" && !wagePrefixOK(v);
    $("#errWage").style.display = bad ? "block":"none";
  });

  /* ç¬¬3é  */
  $$('input[name="agreeInfo"]').forEach(r=> r.addEventListener('change', ()=>{
    markTouched('agreeInfo'); updateNavState();
  }));
  /* ç¬¬4é  */
  ["#fullName","#gender","#nid"].forEach(sel=>{
    const el=$(sel); if(!el) return;
    ["input","change","blur"].forEach(evt=> el.addEventListener(evt, ()=>{ markTouched(el.id); }));
    ["input","change"].forEach(evt=> el.addEventListener(evt, updateNavState));
  });
  /* å‹•æ…‹å‰ç¶´ï¼šèº«åˆ†è­‰å­—è™Ÿ */
  $("#nid")?.addEventListener('input', (e)=>{
    const v = e.target.value;
    const bad = v!=="" && !alnumPrefixOK(v,10);
    $("#errNid").style.display = bad ? "block":"none";
  });

  /* ç¬¬5é  */
  ["#birthRoc7","#birthPlace","#addrHouse","#addrLive"].forEach(sel=>{
    const el=$(sel); if(!el) return;
    ["input","change","blur"].forEach(evt=> el.addEventListener(evt, ()=>{ markTouched(el.id); }));
    ["input","change"].forEach(evt=> el.addEventListener(evt, updateNavState));
  });
  /* å‹•æ…‹å‰ç¶´ï¼šæ°‘åœ‹ç”Ÿæ—¥7ç¢¼ */
  $("#birthRoc7")?.addEventListener('input', (e)=>{
    const v = e.target.value;
    const bad = v!=="" && !digitsPrefixOK(v,7);
    $("#errBirthRoc7").style.display = bad ? "block":"none";
  });

  /* ç¬¬6é  */
  ["#gmail","#mobile","#edu"].forEach(sel=>{
    const el=$(sel); if(!el) return;
    ["input","change","blur"].forEach(evt=> el.addEventListener(evt, ()=>{ markTouched(el.id); }));
    ["input","change"].forEach(evt=> el.addEventListener(evt, updateNavState));
  });
  /* Gmail è‡ªå‹•è£œ @gmail.com èˆ‡å°å¯«åŒ–ï¼ˆä¸å³æ™‚å ±éŒ¯ï¼‰ */
  $("#gmail")?.addEventListener('input', (e)=>{
    const el = e.target;
    let v = (el.value||"").toLowerCase();
    if(v.endsWith("@")) v = v + "gmail.com"; /* æ‰“åˆ° @ è‡ªå‹•è£œ gmail.com */
    el.value = v;
  });
  /* å‹•æ…‹å‰ç¶´ï¼šæ‰‹æ©Ÿ */
  $("#mobile")?.addEventListener('input', (e)=>{
    const v = e.target.value;
    const bad = v!=="" && !mobilePrefixOK(v);
    $("#errMobile").style.display = bad ? "block" : "none";
  });

  /* ç¬¬7é  */
  $$('input[name="agreeOther"]').forEach(r=> r.addEventListener('change', ()=>{
    markTouched('agreeOther'); updateNavState();
  }));

  /* ç¬¬8é  */
  ["#emgName","#emgRel","#homePhone","#emgMobile","#emgAddr"].forEach(sel=>{
    const el=$(sel); if(!el) return;
    ["input","change","blur"].forEach(evt=> el.addEventListener(evt, ()=>{ markTouched(el.id); }));
    ["input","change"].forEach(evt=> el.addEventListener(evt, updateNavState));
  });
  $("#emgMobile")?.addEventListener('input', (e)=>{
    const v = e.target.value;
    const bad = v!=="" && !mobilePrefixOK(v);
    $("#errEmgMobile").style.display = bad ? "block" : "none";
  });

  /* ç¬¬9é  */
  ["#depEnable","#depRel","#depName","#depNid","#depBirth7"].forEach(sel=>{
    const el=$(sel); if(!el) return;
    ["input","change","blur"].forEach(evt=> el.addEventListener(evt, ()=>{ markTouched(el.id); }));
    ["input","change"].forEach(evt=> el.addEventListener(evt, updateNavState));
  });
  $("#depEnable")?.addEventListener('change', ()=>{ updateNavState(); });
  $("#depNid")?.addEventListener('input', (e)=>{
    const v = e.target.value;
    const bad = v!=="" && !alnumPrefixOK(v,10);
    $("#errDepNid").style.display = bad ? "block":"none";
  });
  $("#depBirth7")?.addEventListener('input', (e)=>{
    const v = e.target.value;
    const bad = v!=="" && !digitsPrefixOK(v,7);
    $("#errDepBirth7").style.display = bad ? "block":"none";
  });

  /* ç¬¬10é  */
  $$('input[name="agreeUpload"]').forEach(r=> r.addEventListener('change', ()=>{
    markTouched('agreeUpload'); updateNavState();
  }));

  /* ç¬¬11é ï¼šæª”æ¡ˆä¸Šå‚³ + æª”åé¡¯ç¤º + æ–°å¢ç¸®åœ–é è¦½ */
  ["#idFront","#idBack"].forEach(sel=>{
    const el=$(sel); if(!el) return;
    el.addEventListener('change', ()=>{
      markTouched(el.id);
      $("#nameFront").textContent = ($("#idFront").files?.[0]?.name)||"å°šæœªé¸å–æª”æ¡ˆ";
      $("#nameBack").textContent  = ($("#idBack").files?.[0]?.name)||"å°šæœªé¸å–æª”æ¡ˆ";

      /* æ–°å¢ï¼šä¾ç…§ä¸åŒæ¬„ä½æ›´æ–°å°æ‡‰çš„å°ç¸®åœ–é è¦½ */
      if(el.id === "idFront"){
        updateFilePreview(el, "previewFront");
      }
      if(el.id === "idBack"){
        updateFilePreview(el, "previewBack");
      }

      updateNavState();
    });
  });
  ["#chk1","#chk2","#chk3","#chk4"].forEach(sel=>{
    const el=$(sel); if(!el) return;
    el.addEventListener('change', updateNavState);
  });

  /* ç¬¬12é ï¼ˆæ ¸æª¢å€ï¼‰ â†’ åªæ§åˆ¶æŒ‰éˆ•å¯æŒ‰ï¼Œä¸é¡¯ç¤ºéŒ¯èª¤ */
  ["#pre1","#pre2","#pre3","#pre4","#pre5","#pre6","#pre7"].forEach(sel=>{
    const el=$(sel); if(!el) return;
    el.addEventListener('change', ()=>{
      markTouched('preflight');
      updateNavState();
    });
  });
}

function bindActionBar(){
  $("#btnPrev").addEventListener("click", ()=>{
    if(FORM_LOCKED) return; /* æ–°å¢ï¼šè‹¥å·²é–å®šï¼Œé˜»æ­¢è¿”å›æ“ä½œ */
    if(currentPage>1){ showStep(currentPage-1); }
  });
  $("#btnNext").addEventListener("click", ()=>{
    if(FORM_LOCKED) return; /* æ–°å¢ï¼šè‹¥å·²é–å®šï¼Œé˜»æ­¢å‰é€²æ“ä½œ */
    const ok = validatePage(currentPage, /*submit*/ true);
    if(ok && currentPage<TOTAL_STEPS){
      setUpdatedNow(); /* æ¯æ¬¡éé æ¨™è¨˜æ›´æ–°æ™‚é–“ */
      showStep(currentPage+1);
    }
  });
  $("#btnFinish").addEventListener("click", ()=>{
    if(FORM_LOCKED) return; /* æ–°å¢ï¼šè‹¥å·²é–å®šï¼Œé¿å…é‡è¤‡é€å‡º */
    if(currentPage===TOTAL_STEPS){
      setUpdatedNow(); /* å®Œæˆæ™‚ä¹Ÿæ¨™è¨˜æ›´æ–°æ™‚é–“ */
      alert("âœ… å·²å®Œæˆ,æ­¡è¿é‚å…¥åœ°ç„ğŸ˜ˆ");
      /* æ–°å¢ï¼šæŒ‰ä¸‹å®Œæˆå¾Œé–å®šæ•´ä»½è¡¨å–®ï¼Œç¦æ­¢å†è¿”å›æˆ–ä¿®æ”¹ */
      lockForm();
      updateNavState();
    }
  });
}

/* åˆå§‹é¡¯ç¤ºç¬¬1é  */
document.addEventListener("DOMContentLoaded", ()=>{
  showStep(1);
  bindLiveValidation();
  bindActionBar();
  autoFitActionbarHeight(); /* è¼‰å…¥å¾Œå…ˆé‡æ¸¬ actionbar é«˜åº¦ */
  updateStampUI();          /* åˆå§‹åŒ–æ™‚é–“æˆ³é¡¯ç¤º */
  /* å³ä¸Šè§’é ç¢¼åˆå§‹åŒ–å·²ç”± showStep è™•ç† */
  /* æ³¨æ„ï¼šå¯†ç¢¼æ­£ç¢ºå¾Œæ‰æœƒå¯«å…¥ CreatedAt æ™‚é–“æˆ³ */
});
</script>
</body>
</html>
